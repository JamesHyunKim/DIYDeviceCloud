# Main DIY Device Cloud Playbook
---
# Provision server on Amazon EC2.
- include: provision_ec2.yml
  vars:
    # Access keys for user with 'power user' access to AWS (i.e. can create instances).
    access_key:    "YOUR ACCESS KEY"
    secret_key:    "YOUR SECRET KEY"
    # Region to create instance inside.
    region:        "us-west-2"
    # Elastic IP to assign to instance.
    # Optional, use this if you own a domain and want to assign a static IP to the server.
    # You must create the elastic IP ahead of time on AWS.
    #elastic_ip:     "0.0.0.0"
    # FreeDNS.afraid.org update URL.
    # Optional, use this if you want to use a dynamic DNS subdomain from freedns.afraid.org.
    # Specify the direct URL for updates of a desired subdomain.
    #freedns_update: "YOUR FREEDNS DIRECT UPDATE URL"
# Generate SSL certificates for MQTT communication.
- include: certificates.yml
  vars:
    # Common name associated with signing cert.  Set to your actual name.
    ca_cn: "Your Name"
    # How many days the certs should be valid.
    cert_days: 3650
    # Common name associated with server cert.  Set to server host name or IP.
    # TODO: Try to infer this automatically as broker IP if not set.
    server_cn: "your.domain.com"
    # Common name for client cert.  Will be used to identify MQTT user.
    client_cn: "client"
# Set up broker server.
- include: broker.yml
